import{_ as e,c as a,o as d,ah as l}from"./chunks/framework.BwFTqLo3.js";const f=JSON.parse('{"title":"FAQ","description":"","frontmatter":{},"headers":[],"relativePath":"user-guide/faq.md","filePath":"user-guide/faq.md","lastUpdated":1771239514000}'),o={name:"user-guide/faq.md"};function n(i,t,r,c,s,u){return d(),a("div",null,[...t[0]||(t[0]=[l('<h1 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">​</a></h1><h2 id="selectors" tabindex="-1">Selectors <a class="header-anchor" href="#selectors" aria-label="Permalink to &quot;Selectors&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">Operator</th><th style="text-align:left;">Description</th><th style="text-align:left;">Example</th></tr></thead><tbody><tr><td style="text-align:left;"><code>.</code></td><td style="text-align:left;">Selects the value of the current control</td><td style="text-align:left;"><code>. &gt; 10</code></td></tr><tr><td style="text-align:left;"><code>$control-name</code></td><td style="text-align:left;">Shorthand for selecting a particular control</td><td style="text-align:left;"><code>$surname</code></td></tr><tr><td style="text-align:left;"><code>$control-name/@attributeName</code></td><td style="text-align:left;">Access an attribute of a control. Note: by default AireForms adds a <code>displayName</code> attribute to all select controls</td><td style="text-align:left;"><code>$administrativeGender/@displayName</code></td></tr><tr><td style="text-align:left;"><code>instance(&#39;building-block-id&#39;)/$control-name</code></td><td style="text-align:left;">Shorthand for selecting a particular control in another building block</td><td style="text-align:left;"><code>instance(&#39;personal-details&#39;)/$firstname</code></td></tr><tr><td style="text-align:left;"><code>instance(&#39;form-context&#39;)/path/to/item</code></td><td style="text-align:left;">Allows you to reference values configured in the form context which can be viewed by pressing F2 within a form</td><td style="text-align:left;"></td></tr></tbody></table><h2 id="operators" tabindex="-1">Operators <a class="header-anchor" href="#operators" aria-label="Permalink to &quot;Operators&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:center;">Operator</th><th style="text-align:left;">Description</th><th style="text-align:left;">Example</th></tr></thead><tbody><tr><td style="text-align:center;"><code>+</code></td><td style="text-align:left;">Addition</td><td style="text-align:left;"><code>3 + 2</code></td></tr><tr><td style="text-align:center;"><code>-</code></td><td style="text-align:left;">Subtraction</td><td style="text-align:left;"><code>3 - 2</code></td></tr><tr><td style="text-align:center;"><code>*</code></td><td style="text-align:left;">Multiplication</td><td style="text-align:left;"><code>3 * 2</code></td></tr><tr><td style="text-align:center;"><code>div</code></td><td style="text-align:left;">Division</td><td style="text-align:left;"><code>6 div 2</code></td></tr><tr><td style="text-align:center;"><code>=</code></td><td style="text-align:left;">Equal</td><td style="text-align:left;"><code>value = 3.50</code></td></tr><tr><td style="text-align:center;"><code>!=</code></td><td style="text-align:left;">Not equal</td><td style="text-align:left;"><code>value != 3.50</code></td></tr><tr><td style="text-align:center;"><code>&lt;</code></td><td style="text-align:left;">Less than</td><td style="text-align:left;"><code>value &lt; 3.50</code></td></tr><tr><td style="text-align:center;"><code>&lt;=</code></td><td style="text-align:left;">Less than or equal to</td><td style="text-align:left;"><code>value &lt;= 3.50</code></td></tr><tr><td style="text-align:center;"><code>&gt;</code></td><td style="text-align:left;">Greater than</td><td style="text-align:left;"><code>value &gt; 3.50</code></td></tr><tr><td style="text-align:center;"><code>&gt;=</code></td><td style="text-align:left;">Greater than or equal to</td><td style="text-align:left;"><code>value &gt;= 3.50</code></td></tr><tr><td style="text-align:center;"><code>or</code></td><td style="text-align:left;">or</td><td style="text-align:left;"><code>value = 3.50 or value = 3.70</code></td></tr><tr><td style="text-align:center;"><code>and</code></td><td style="text-align:left;">and</td><td style="text-align:left;"><code>value &gt; 3.00 and value &lt; 3.90</code></td></tr><tr><td style="text-align:center;"><code>mod</code></td><td style="text-align:left;">Modulus (division remainder)</td><td style="text-align:left;"><code>7 mod 3</code></td></tr></tbody></table><h2 id="functions" tabindex="-1">Functions <a class="header-anchor" href="#functions" aria-label="Permalink to &quot;Functions&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:center;">function</th><th style="text-align:left;">Description</th><th style="text-align:left;">Example</th></tr></thead><tbody><tr><td style="text-align:center;"><code>true()</code></td><td style="text-align:left;">Returns the boolean value true</td><td style="text-align:left;"><code>$yes-no = true()</code></td></tr><tr><td style="text-align:center;"><code>false()</code></td><td style="text-align:left;">Returns the boolean value false</td><td style="text-align:left;"><code>$yes-no = false()</code></td></tr><tr><td style="text-align:center;"><code>concat(string,string,...)</code></td><td style="text-align:left;">Returns the concatenation of the strings</td><td style="text-align:left;"><code>concat($first-name, &#39; &#39;, $last-name)</code></td></tr><tr><td style="text-align:center;"><code>string-length(string)</code></td><td style="text-align:left;">Returns the length of the specified string</td><td style="text-align:left;"><code>string-length(.) &gt; 10</code></td></tr><tr><td style="text-align:center;"><code>local-dateTime()</code></td><td style="text-align:left;">Returns the local-dateTime with timezone information</td><td style="text-align:left;">Result: 2019-04-26T11:19:801-01:00</td></tr><tr><td style="text-align:center;"><code>local-date()</code></td><td style="text-align:left;">Returns the local date with timezone information</td><td style="text-align:left;">Result: 2019-04-26-01:00</td></tr><tr><td style="text-align:center;"><code>days-from-date(date)</code></td><td style="text-align:left;">Returns the number of days since 01-01-1970 to the date specfied</td><td style="text-align:left;"><code>days-from-date(xs:date(&#39;2002-01-01))</code> <br>Result: 11688</td></tr><tr><td style="text-align:center;"><code>xf:seconds-from-dateTime(dateTime)</code></td><td style="text-align:left;">Returns the number of seconds since 01-01-1970 to the dateTime specified <br><i>Note: This needs to be prefixed with xf: so it doesn&#39;t clash with the xpath 3.1 function</i></td><td style="text-align:left;"><code>xf:seconds-from-dateTime(xs:dateTime(&#39;1971-01-01T00:00:00Z&#39;))</code> <br> Result: 31536000</td></tr><tr><td style="text-align:center;"><code>nf:date-add(&lt;iso-date&gt;, &lt;unit&gt;, &lt;amount-to-add&gt;)</code></td><td style="text-align:left;">Adds (or subtracts) a certain amount from a given input date. Valid units are: <code>years</code>, <code>months</code>, <code>days</code>, <code>minutes</code>, <code>hours</code> or <code>seconds</code></td><td style="text-align:left;"><code>nf:date-add(&#39;2020-12-31&#39;, &#39;days&#39;, 2)</code> returns a date two days after 31st December 2020 - i.e. <code>2021-01-02T00:00:00.000Z</code></td></tr><tr><td style="text-align:center;"><code>nf:isValidNHSNumber(&lt;node | value&gt;)</code></td><td style="text-align:left;">Validates the string literal or string evaluated from an XPath conforms to NHS Number validation rules - see <a href="https://en.wikipedia.org/wiki/NHS_number" target="_blank" rel="noreferrer">https://en.wikipedia.org/wiki/NHS_number</a>. This includes validating the check-digit and gracefully handling whitespace. Note: you can use <a href="http://danielbayley.uk/nhs-number/" target="_blank" rel="noreferrer">http://danielbayley.uk/nhs-number/</a> for testing purposes.</td><td style="text-align:left;"><code>nf:isValidNHSNumber(&#39;8211041200&#39;)</code> returns <code>true</code>, <code>nf:isValidNHSNumber(&#39;2786342324&#39;)</code> returns <code>false</code>. Typical usage <code>nf:isValidNHSNumber($NHSNumberControl)</code></td></tr></tbody></table><h2 id="cui-functions" tabindex="-1">CUI Functions <a class="header-anchor" href="#cui-functions" aria-label="Permalink to &quot;CUI Functions&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:center;">function</th><th style="text-align:left;">Description</th><th style="text-align:left;">Example</th></tr></thead><tbody><tr><td style="text-align:center;"><code>nf:CUIFormatDate(date)</code></td><td style="text-align:left;">Returns the date in CUI format</td><td style="text-align:left;"><code>nf:CUIFormatDate(&#39;2019-05-01&#39;)</code> Result: 01-May-2019</td></tr><tr><td style="text-align:center;"><code>nf:CUIFormatAge(dateOfBirth)</code></td><td style="text-align:left;">Returns the current age in CUI format</td><td style="text-align:left;"><code>nf:CUIFormatAge(&#39;2015-10-25&#39;)</code></td></tr><tr><td style="text-align:center;"><code>nf:CUIFormatAge(dateOfBirth, comparisonDate)</code></td><td style="text-align:left;">Returns age in CUI format on the date of the second date parameter</td><td style="text-align:left;"><code>nf:CUIFormatAge(&#39;2015-10-25&#39;, &#39;2015-11-12&#39;)</code> <br>Result: 18d</td></tr><tr><td style="text-align:center;"><code>nf:AgeInYears(dateOfBirth, comparisonDate?)</code></td><td style="text-align:left;">Returns age in years (as an integer) as of today, or at the time of the optional <code>comparisonDate</code></td><td style="text-align:left;"><code>nf:AgeInYears(&#39;2000-01-01&#39;, &#39;2015-11-12&#39;)</code> <br>Result: 15</td></tr><tr><td style="text-align:center;"><code>nf:CUIFormatName(given, family, title)</code></td><td style="text-align:left;">Returns a person&#39;s name in CUI format</td><td style="text-align:left;"><code>nf:CUIFormatName(&#39;Bob&#39;, &#39;Smith&#39;, &#39;Master&#39;)</code> <br>Result: SMITH, Bob (Master)</td></tr></tbody></table><h2 id="cheat-sheet" tabindex="-1">Cheat Sheet <a class="header-anchor" href="#cheat-sheet" aria-label="Permalink to &quot;Cheat Sheet&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:center;">function</th><th style="text-align:left;">Description</th><th style="text-align:left;">Example</th></tr></thead><tbody><tr><td style="text-align:center;"><code>nf:multi-select-values(&lt;multi-select-control&gt;) = &#39;&lt;some-value&gt;&#39;</code></td><td style="text-align:left;">Safe way to find if a specific option has been chosen in a multi-select control (checkboxes, multi-select dropdowns etc). Should be used in preference to <code>contains(&lt;multi-select-control&gt;, &#39;&lt;some-value&gt;&#39;)</code></td><td style="text-align:left;"><code>nf:multi-select-values($pets) = &#39;cat&#39;</code> returns <code>true</code> if the multi-select options for <code>$pets</code> has the <code>cat</code> option selected (others can be selected in addition), <code>false</code> otherwise. Note: if your options also included large cats (lions etc.) with a corresponding value of <code>cat-large</code> then the above method would be safe, wheras <code>contains($pets, &#39;cat&#39;)</code> would return <code>true</code> if either <code>cat</code> or <code>cat-large</code> was selected.</td></tr><tr><td style="text-align:center;"><code>substring(&lt;iso-date&gt;,1,10)</code></td><td style="text-align:left;">Returns the date portion of an iso-date / iso-date-time value</td><td style="text-align:left;"><code>substring(local-date(),1,10)</code> returns today&#39;s date - useful as an <em>initial value</em> for date felds that capture an event date</td></tr><tr><td style="text-align:center;"><code>substring(&lt;iso-date-time&gt;,12,5)</code></td><td style="text-align:left;">Returns the time portion of an iso-date-time value</td><td style="text-align:left;"><code>substring(local-dateTime(),12,5)</code> returns the local time - useful as an <em>initial value</em> for time felds that capture when an event took place</td></tr><tr><td style="text-align:center;"><code>string-length(.) &lt;operator&gt; &lt;character count limit&gt;</code></td><td style="text-align:left;">Logic to add a <a href="./advanced/rules-and-logic.html#validation">constraint</a> on character count</td><td style="text-align:left;"><code>string-length(.) &lt;= 100</code> adds a constraint that the user input must contain 100 or less characters (includes leading, trailing and multiple adjacent whitespace characters)</td></tr><tr><td style="text-align:center;"><code>string-length(normalize-space(.)) &lt;operator&gt; &lt;character count limit&gt;</code></td><td style="text-align:left;">Logic to add a <a href="./advanced/rules-and-logic.html#validation">constraint</a> on character count ignoring superfulous spaces</td><td style="text-align:left;"><code>string-length(normalize-space(.)) &lt;= 100</code> adds a constraint that the user input must contain 100 or less characters (excludes leading, trailing whitespace. Multiple adjacent whitespace characters are counted as one)</td></tr><tr><td style="text-align:center;"><code>count(tokenize(normalize-space(.), &#39; &#39;)) &lt;operator&gt; &lt;word count limit&gt;</code></td><td style="text-align:left;">Logic to add a word count <a href="./advanced/rules-and-logic.html#validation">constraint</a></td><td style="text-align:left;"><code>count(tokenize(normalize-space(.), &#39; &#39;)) = 3</code> adds a constraint that the user input must contain exactly three words (no more no less). For futher understanding, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-space" target="_blank" rel="noreferrer">normalise-space()</a> function trims and reduces double spaces to one single one, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-tokenize" target="_blank" rel="noreferrer">tokenize()</a> function breaks the text - in this case words delimited by a single space (<code>␣</code>). The <a href="https://www.w3.org/TR/xpath-functions-31/#func-count" target="_blank" rel="noreferrer">count()</a> function counts the number of nodes (i.e. words in this case)</td></tr><tr><td style="text-align:center;"><code>round($raw-decimal * 10##) div 10##</code></td><td style="text-align:left;">Display a raw decimal value to a certain number of decimal places. When multiplied/divided by <code>10</code> this will give one decimal place, <code>100</code> will give two decimal places and so on. Note - this is not just formatting it affects the data.</td><td style="text-align:left;"><code> round(($weight div ($height*$height))*100) div 100</code> returns a BMI in this case with two decimal place precision</td></tr><tr><td style="text-align:center;"><code>nf:other-value()</code></td><td style="text-align:left;">From <code>7.4.0</code> - When a control is marked &quot;with-other&quot; we use a special value in the control. This function returns that special value. This can then be used to see if a select has the option selected.</td><td style="text-align:left;"><code>$single-select = nf:other-value()</code> or <code>nf:multi-select-values($multi-select) = nf:other-value()</code></td></tr></tbody></table><h2 id="logic-and-calculations-in-repeats" tabindex="-1">Logic and Calculations in repeats <a class="header-anchor" href="#logic-and-calculations-in-repeats" aria-label="Permalink to &quot;Logic and Calculations in repeats&quot;">​</a></h2><p>Form Repeats (or iterative rows of data collection) need a little special consideration when it comes to logic and calculations. See below some examples of typical logic or calculation needs within or relating to repeats.</p><table tabindex="0"><thead><tr><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>You want to apply a calculation or logic at the repeat / line item level relative to a control outside the repeat.</td><td>For example, to initialise a the repeat item <code>added-date</code> control value to the same as the <code>order-date</code> value which is outside the repeat item you would use logic consistent with a calculation anywhere on the form - i.e. you could set the initial value to simply be <code>$order-date</code></td></tr><tr><td>You want to perform logic or a calculation relative to another control that is witihn the same repeat item.</td><td>For example, say you want to show a user friendly date on the repeat, where the underlying date is captiured in the control <code>medication-start-date</code> you could have another control within the repeat item with a calculated value of <code>nf:CUIFormatDate($medication-start-date)</code>. AireForms will automatically resolve this to be the sibling control in the same repeat item instance.</td></tr><tr><td>You want to add a control that indicates the repeat item numbering / index. You want it to automatically update on item add/insert and item delete.</td><td>This can be achieved a number of ways - for instance you could have a Calculated Value control called <code>index</code> as the first item in the repeat. If you wanted it to be numbered from 1 onwards you could set the calculation to be <code>count(preceding::index) + 1</code> (note dollar notation is not required as the <code>preceding</code> XPath axis will automatically count the previous occurences of the control in the <em>document order</em> relative to the <code>index</code> control in the repeat item instance).</td></tr><tr><td>You want to add a control outside of the repeat that aggregates some data contained in the repeat items.</td><td>For example if you wanted to count how many repeat items there are, and there is a control called <code>item-name</code> in the repeat you would simply have a calculation of <code>count($item-name)</code>. Similarly, if you want to sum a value across all items in the repeat you might have a control with a calculated value of <code>sum($item-value)</code> where <code>item-value</code> is a numeric typed control at the repeat item level.</td></tr></tbody></table>',14)])])}const g=e(o,[["render",n]]);export{f as __pageData,g as default};
